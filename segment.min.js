angular.module("ngSegment", []).provider("segment",function(){"use strict";function a(){d?window.setTimeout(function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+d+"/analytics.min.js",a.onload=function(){b("Segment script loaded.")},a.onerror=function(){console.warn(g+"Error loading Segment library.")};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)},h):console.warn(g+"API key not specified.")}function b(){f.debug&&(arguments[0]=g+arguments[0],console.log.apply(console,arguments))}var c,d,e=window.analytics=window.analytics||[],f={},g="[Segment] ",h=0;if(!e.initialize){if(e.invoked)return void(window.console&&console.error&&console.error(g+"Segment snippet included twice."));e.invoked=!0,e.SNIPPET_VERSION="3.1.0",e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"],e.factory=function(a){return function(){var b=Array.prototype.slice.call(arguments);return b.unshift(a),e.push(b),e}},f.factory=function(a){return function(){return f.condition&&!f.condition(a,arguments)?void b("Track condition returned false."):(b(a,arguments),e[a].apply(this,arguments))}};for(var i=0;i<e.methods.length;i++){var j=e.methods[i];e[j]=e.factory(j),f[j]=f.factory(j)}this.setDelay=function(a){h=a},this.setKey=function(c){d=c,b("Set API key:",c),a()},this.setCondition=function(a){b("Set tracking condition."),c=a},this.setEvents=function(a){b("Set events:",a),f.events=a},this.enableDebug=function(){f.debug=!0,b("Enabled debug mode.")},this.$get=["$injector","$rootScope","$location",function(a,b,d){return"function"==typeof c&&(f.condition=function(b,d){return a.invoke(c,c,{method:b,params:d})}),b.$on("$routeChangeSuccess",function(){f.pageview(d.path())}),f}]}});
